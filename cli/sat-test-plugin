#!/usr/bin/env python3
import sys
from pathlib import Path

REPO_ROOT = Path(__file__).resolve().parents[1]
sys.path.insert(0, str(REPO_ROOT))


def main():
    if len(sys.argv) < 2:
        print("Usage: sat-test-plugin <plugin-id>")
        sys.exit(1)

    plugin_id = sys.argv[1]

    if plugin_id == "metadata.dublin-core":
        from plugins.metadata.dublin_core import self_test
        ok = self_test.run_self_tests()
        if not ok:
            sys.exit(1)
        sys.exit(0)
    else:
        print(f"No self-test implemented for plugin: {plugin_id}")
        sys.exit(2)


if __name__ == "__main__":
    main()
